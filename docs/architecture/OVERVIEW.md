# 架构总览

## 项目简介

**YBP (永麦 BIM Platform)** 是一个基于现代前端技术栈构建的 BIM 平台，专注于提供高性能、可扩展的建筑信息模型管理解决方案。

## 系统架构图

```
┌─────────────────────────────────────────────────────────────┐
│                        YBP Platform                          │
│                     (永麦 BIM Platform)                      │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
        ┌─────────────────────────────────────────┐
        │         Frontend Application             │
        │      (React 19 + Vite 7 + Tailwind)     │
        └─────────────────────────────────────────┘
                              │
        ┌─────────────────────┴─────────────────────┐
        │                                           │
        ▼                                           ▼
┌──────────────┐                          ┌──────────────┐
│  UI Layer    │                          │  Data Layer  │
│              │                          │              │
│ - Pages      │                          │ - Stores     │
│ - Components │                          │ - Hooks      │
│ - Routes     │                          │ - Utils      │
└──────────────┘                          └──────────────┘
        │                                           │
        └─────────────────────┬─────────────────────┘
                              ▼
                    ┌──────────────────┐
                    │   React Flow     │
                    │  (流程可视化)     │
                    └──────────────────┘
```

## 技术选型理由

### 核心框架

#### React 19
- **选型理由**：
  - 最新版本，提供更好的性能和开发体验
  - 全面支持并发渲染和自动批处理
  - 更强大的 Hooks API 和服务器组件支持
  - 社区生态成熟，资源丰富

#### Vite 7
- **选型理由**：
  - 极速的开发服务器启动和热更新
  - 基于原生 ES 模块，构建速度快
  - 开箱即用的 TypeScript、JSX 支持
  - 优秀的插件生态系统
  - 相比 Webpack，配置更简单直观

#### React Router 7
- **选型理由**：
  - React 生态的标准路由解决方案
  - 支持嵌套路由和数据加载
  - 类型安全的路由定义
  - 最新版本提供更好的性能优化

### UI 框架

#### Tailwind CSS v3
- **选型理由**：
  - 实用优先的 CSS 框架，开发效率高
  - 通过 JIT 引擎，按需生成样式
  - 极小的生产包体积
  - 高度可定制，易于维护
  - 响应式设计和暗色模式支持

### 可视化

#### React Flow
- **选型理由**：
  - 专业的流程图和节点编辑器库
  - 高性能的画布渲染
  - 丰富的交互功能（拖拽、缩放、连接）
  - 完善的类型定义
  - 适合 BIM 平台的工作流可视化需求

### Markdown 支持

#### react-markdown + remark/rehype 生态
- **选型理由**：
  - 强大的 Markdown 渲染能力
  - 支持 GFM (GitHub Flavored Markdown)
  - 代码高亮和 HTML 嵌入支持
  - 适合文档系统集成

### 包管理器

#### pnpm
- **选型理由**：
  - 磁盘空间效率高（符号链接机制）
  - 安装速度快
  - 严格的依赖管理，避免幽灵依赖
  - 天然支持 monorepo

## 目录结构说明

```
YBP/
├── apps/
│   └── frontend/              # 前端应用
│       ├── src/               # 源代码
│       │   ├── assets/        # 静态资源
│       │   ├── components/    # 可复用组件
│       │   ├── hooks/         # 自定义 Hooks
│       │   ├── pages/         # 页面组件
│       │   └── utils/         # 工具函数
│       ├── public/            # 公共静态文件
│       ├── docs/              # 前端文档（应用内文档系统）
│       ├── package.json       # 前端依赖
│       ├── vite.config.js     # Vite 配置
│       └── tailwind.config.js # Tailwind 配置
│
├── docs/                      # 项目文档
│   ├── architecture/          # 架构文档（当前文档）
│   │   ├── OVERVIEW.md        # 架构总览
│   │   ├── tech-stack.md      # 技术栈详情
│   │   └── adr/               # 架构决策记录
│   ├── development/           # 开发文档
│   ├── guides/                # 指南文档
│   ├── project/               # 项目管理文档
│   └── ai-context/            # AI 辅助开发上下文
│
├── .github/                   # GitHub 配置
│   ├── ISSUE_TEMPLATE/        # Issue 模板
│   └── PULL_REQUEST_TEMPLATE.md
│
└── README.md                  # 项目说明
```

### 前端源代码结构

```
apps/frontend/src/
├── assets/          # 静态资源（图片、字体等）
├── components/      # UI 组件库
│   ├── common/      # 通用组件
│   ├── layout/      # 布局组件
│   └── features/    # 功能组件
├── hooks/           # 自定义 React Hooks
├── pages/           # 页面组件（路由页面）
├── utils/           # 工具函数和辅助方法
├── App.jsx          # 应用根组件
└── main.jsx         # 应用入口
```

## 部署架构

### 当前状态
- **状态**：暂未配置
- **类型**：纯前端单页应用（SPA）

### 计划部署方案

#### 方案 1：静态托管（推荐）
```
Build Process:
  pnpm build
    ↓
  dist/
    ↓
  静态托管服务
    - Vercel
    - Netlify
    - Cloudflare Pages
    - GitHub Pages
```

#### 方案 2：容器化部署
```
Docker 容器
  ├── Nginx (静态文件服务)
  └── 应用构建产物 (dist/)
```

### 部署检查清单
- [ ] 配置环境变量管理
- [ ] 设置 CI/CD 流程
- [ ] 配置域名和 SSL
- [ ] 优化构建产物（代码分割、压缩）
- [ ] 配置 CDN 加速
- [ ] 设置错误监控和分析

## 性能优化策略

### 构建优化
- Vite 的代码分割和懒加载
- Tree-shaking 移除未使用代码
- 资源压缩和最小化

### 运行时优化
- React 19 的并发特性
- 路由级别的代码分割
- 图片和资源的懒加载
- Tailwind CSS 的 JIT 模式

### 渲染优化
- React Flow 的虚拟化渲染
- 组件级别的 memo 和 useMemo
- 合理的状态管理和更新策略

## 扩展性设计

### 功能扩展
- 模块化的组件设计
- 可插拔的功能模块
- 统一的接口规范

### 技术扩展
- 预留后端 API 对接能力
- 支持多种数据源集成
- 可扩展的插件系统（未来）

## 安全考虑

- 前端路由保护
- XSS 防护（React 内置）
- 依赖安全审计
- 环境变量和敏感信息管理

## 维护和监控

### 代码质量
- ESLint 代码规范检查
- 统一的代码风格
- 完善的文档体系

### 未来计划
- 添加单元测试和集成测试
- 性能监控和错误追踪
- 用户行为分析
- 日志收集和分析

## 相关文档

- [技术栈详情](./tech-stack.md)
- [架构决策记录 (ADR)](./adr/README.md)
- [前端开发指南](../development/frontend/)
