# 业务逻辑页设计

> 清单匹配规则与工程量计算类型展示

**最后更新**: 2025-12-10

---

## 一、页面目标

| 目标 | 说明 |
|-----|------|
| **理解匹配规则** | 5 种清单匹配方式 |
| **理解计算类型** | 4 种工程量计算方式 |
| **快速查阅** | 卡片式布局，一目了然 |

---

## 二、页面结构

```
业务逻辑页 (/logic)
├── 核心流程 Badge 区
│   └── 族 → 品目 → 清单 → 工程量
│
├── 清单匹配规则区（5 种）
│   ├── 无条件匹配
│   ├── 单参数精确
│   ├── 单参数区间
│   ├── 多参数 AND
│   └── 多参数区间联合
│
├── 工程量计算类型区（4 种）
│   ├── 计数
│   ├── 长度
│   ├── 面积
│   └── 体积
│
└── 底部信息卡片
    └── 需求文档链接
```

---

## 三、核心流程 Badge 区

### 3.1 布局

水平 flex，居中对齐，带间距

### 3.2 设计

```
[族 Family]  →  [品目 Item]  →  [清单 Bill]  →  [工程量 Quantity]
   (蓝色)          (紫色)          (绿色)          (橙色)
```

### 3.3 样式

- Badge: `px-4 py-2 rounded-xl font-medium`
- 颜色: 各自强调色背景 + 白色文字
- 箭头: `text-text-tertiary`

---

## 四、清单匹配规则区

### 4.1 布局

网格布局（`grid-cols-1 sm:grid-cols-2 lg:grid-cols-3`）

### 4.2 卡片设计

```
┌─────────────────────────────────┐
│  ┌────┐                         │
│  │    │  无条件匹配             │
│  └────┘  (颜色指示器)           │
│                                 │
│  所有族实例都带出该清单         │
│                                 │
│  示例：排风扇 → 电源清单        │
└─────────────────────────────────┘
```

### 4.3 五种规则

| 规则 | 颜色 | 描述 | 示例 |
|-----|------|------|------|
| 无条件匹配 | green | 所有族实例都带出该清单 | 排风扇 → 电源清单 |
| 单参数精确 | blue | 参数值完全相等时匹配 | 风量 = 3000 |
| 单参数区间 | amber | 参数值在指定范围内匹配 | 2000 ≤ 风量 < 4000 |
| 多参数 AND | purple | 多个条件同时满足才匹配 | 材质=灰砖 AND 品牌=琛雄 |
| 多参数区间联合 | pink | 多个参数各自区间匹配 | 风量 2000-4000 AND 功率 1-3kW |

### 4.4 数据结构

```javascript
const matchTypes = [
  {
    id: 'unconditional',
    name: '无条件匹配',
    desc: '所有族实例都带出该清单',
    example: '排风扇 → 电源清单',
    color: 'bg-accent-green',
  },
  {
    id: 'exact',
    name: '单参数精确',
    desc: '参数值完全相等时匹配',
    example: '风量 = 3000',
    color: 'bg-accent-blue',
  },
  {
    id: 'range',
    name: '单参数区间',
    desc: '参数值在指定范围内匹配',
    example: '2000 ≤ 风量 < 4000',
    color: 'bg-accent-amber',
  },
  {
    id: 'multi-and',
    name: '多参数 AND',
    desc: '多个条件同时满足才匹配',
    example: '材质=灰砖 AND 品牌=琛雄',
    color: 'bg-accent-purple',
  },
  {
    id: 'multi-range',
    name: '多参数区间联合',
    desc: '多个参数各自区间匹配，联合判断',
    example: '风量 2000-4000 AND 功率 1-3kW',
    color: 'bg-accent-red',
  },
]
```

### 4.5 样式

- 卡片: `.card` 类
- 颜色指示器: `w-3 h-3 rounded-full`
- 标题: `text-lg font-semibold`
- 描述: `text-sm text-text-secondary`
- 示例: `text-xs text-text-tertiary bg-bg-active px-2 py-1 rounded`

---

## 五、工程量计算类型区

### 5.1 布局

4 列网格（`grid-cols-2 lg:grid-cols-4`）

### 5.2 卡片设计

```
┌─────────────────┐
│      计数       │
│      Count      │
│                 │
│      (台)       │
│                 │
│   风机、设备    │
└─────────────────┘
```

### 5.3 四种类型

| 类型 | 英文 | 单位 | 适用场景 |
|-----|------|------|---------|
| 计数 | Count | 台/个 | 风机、设备 |
| 长度 | Length | m | 管道、线缆 |
| 面积 | Area | m² | 楼板、幕墙 |
| 体积 | Volume | m³ | 混凝土 |

### 5.4 数据结构

```javascript
const quantityTypes = [
  { name: '计数', sub: 'Count', unit: '台/个', example: '风机、设备', color: 'bg-accent-blue' },
  { name: '长度', sub: 'Length', unit: 'm', example: '管道、线缆', color: 'bg-accent-green' },
  { name: '面积', sub: 'Area', unit: 'm²', example: '楼板、幕墙', color: 'bg-accent-purple' },
  { name: '体积', sub: 'Volume', unit: 'm³', example: '混凝土', color: 'bg-accent-amber' },
]
```

### 5.5 样式

- 卡片: `.card` + 居中对齐
- 标题: `text-xl font-bold`
- 副标题: `text-sm text-text-tertiary`
- 单位: `text-lg font-mono`
- 示例: `text-xs text-text-secondary`

---

## 六、底部信息卡片

### 6.1 设计

```
┌─────────────────────────────────────────────────────────┐
│  ℹ️  更多业务逻辑详情请参阅需求文档                      │
│      文档路径: docs/project/01-原型评审/requirements/   │
└─────────────────────────────────────────────────────────┘
```

### 6.2 样式

- 背景: `bg-accent-blue/10`
- 边框: `border-accent-blue/20`
- 图标: `text-accent-blue`

---

## 七、响应式设计

| 断点 | 匹配规则 | 计算类型 |
|-----|---------|---------|
| 手机 | 1列 | 2列 |
| 平板 | 2列 | 4列 |
| 桌面 | 3列 | 4列 |

---

## 变更记录

| 版本 | 日期 | 修改内容 |
|------|------|----------|
| v1.0 | 2025-11-27 | 新建，合并原业务流程页和场景案例页 |
| v2.0 | 2025-12-10 | 简化为匹配规则+计算类型，卡片式布局 |
