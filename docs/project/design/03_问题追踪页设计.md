# 问题追踪页设计

> 待讨论与已解决的技术问题追踪

**最后更新**: 2025-12-10

---

## 一、页面目标

| 目标 | 说明 |
|-----|------|
| **问题追踪** | 记录待讨论的技术问题 |
| **状态管理** | 区分待讨论/讨论中/已解决 |
| **方案展示** | 展示问题的候选解决方案 |

---

## 二、页面结构

```
问题追踪页 (/issues)
├── Page Header
│   ├── 标题：问题追踪
│   └── 描述：待讨论与已解决的技术问题
│
├── Stats Section（统计卡片）
│   └── 4 张统计卡片（可点击筛选）
│       ├── 全部问题
│       ├── 待讨论
│       ├── 讨论中
│       └── 已解决
│
└── Issue List Section（问题列表）
    └── 可展开的问题卡片
```

---

## 三、统计卡片区块

### 3.1 布局

4 列网格（grid-cols-2 sm:grid-cols-4）

### 3.2 卡片设计

```
┌────────────────────┐
│  ┌────┐            │
│  │ 4  │            │
│  └────┘            │
│  (渐变数字)        │
│                    │
│  全部问题          │
│  (标签文字)        │
└────────────────────┘
```

### 3.3 四种状态

| 状态 | 渐变色 | 说明 |
|-----|--------|------|
| 全部问题 | gray-500→gray-600 | 所有问题总数 |
| 待讨论 | amber-500→orange-500 | 需要讨论的问题 |
| 讨论中 | blue-500→indigo-500 | 正在讨论的问题 |
| 已解决 | emerald-500→teal-500 | 已有解决方案 |

### 3.4 交互

- 点击卡片切换筛选
- 当前筛选: border-primary/50 + ring-2

---

## 四、问题列表区块

### 4.1 卡片收起状态

```
┌──────────────────────────────────────────────────────────────┐
│  ┌────┐  [P0]  幕墙工程量计算             [待讨论]      ▼   │
│  │ ? │                                                      │
│  └────┘  幕墙面积 - 嵌板面积，如何自动实现？                │
│  (状态图标)                                                  │
└──────────────────────────────────────────────────────────────┘
```

### 4.2 未解决问题展开状态

```
┌──────────────────────────────────────────────────────────────┐
│  ┌────┐  [P0]  幕墙工程量计算             [待讨论]      ▲   │
│  │ ? │                                                      │
│  └────┘  幕墙面积 - 嵌板面积，如何自动实现？                │
├──────────────────────────────────────────────────────────────┤
│                                                              │
│  问题点                          候选方案                    │
│  • 如何识别从属关系？           ┌────────────────────────┐  │
│  • 如何实现自动减法？           │ [A] Revit 插件导出     │  │
│                                 │     关联信息           │  │
│                                 ├────────────────────────┤  │
│                                 │ [B] 系统层面建立       │  │
│                                 │     父子关系           │  │
│                                 ├────────────────────────┤  │
│                                 │ [C] 易达定制特殊       │  │
│                                 │     出量逻辑           │  │
│                                 └────────────────────────┘  │
└──────────────────────────────────────────────────────────────┘
```

### 4.3 已解决问题展开状态

```
┌──────────────────────────────────────────────────────────────┐
│  ┌────┐  [P2]  多条件匹配优先级           [已解决]      ▲   │
│  │ ✓ │                                                      │
│  └────┘  多个清单条件都匹配时选哪个？                        │
├──────────────────────────────────────────────────────────────┤
│                                                              │
│  ┌────┐  解决方案                                           │
│  │ ✓ │                                                      │
│  └────┘  按清单配置顺序匹配，第一个成功的生效。              │
│          UI 提供拖拽排序。                                   │
│                                                              │
└──────────────────────────────────────────────────────────────┘
```

---

## 五、状态配置

### 5.1 状态样式

```javascript
const statusConfig = {
  pending: {
    label: '待讨论',
    gradient: 'from-amber-500 to-orange-500',
    bg: 'bg-amber-500/10',
    text: 'text-amber-400',
    icon: <QuestionIcon />,
  },
  discussing: {
    label: '讨论中',
    gradient: 'from-blue-500 to-indigo-500',
    bg: 'bg-blue-500/10',
    text: 'text-blue-400',
    icon: <ChatIcon />,
  },
  resolved: {
    label: '已解决',
    gradient: 'from-emerald-500 to-teal-500',
    bg: 'bg-emerald-500/10',
    text: 'text-emerald-400',
    icon: <CheckCircleIcon />,
  },
}
```

### 5.2 优先级样式

```javascript
const priorityConfig = {
  P0: { label: 'P0', color: 'text-red-400', bg: 'bg-red-500/10' },
  P1: { label: 'P1', color: 'text-amber-400', bg: 'bg-amber-500/10' },
  P2: { label: 'P2', color: 'text-on-surface-variant', bg: 'bg-surface-bright/50' },
}
```

---

## 六、数据结构

```javascript
const issues = [
  {
    id: 'curtain-wall',
    title: '幕墙工程量计算',
    priority: 'P0',
    status: 'pending',
    desc: '幕墙面积 - 嵌板面积，如何自动实现？',
    problems: [
      '如何识别幕墙与嵌板的从属关系？',
      '如何实现自动的减法运算？',
    ],
    solutions: [
      { label: 'A', desc: 'Revit 插件导出关联信息' },
      { label: 'B', desc: '系统层面建立父子关系' },
      { label: 'C', desc: '易达定制特殊出量逻辑' },
    ],
  },
  {
    id: 'custom-formula',
    title: '工程量自定义公式',
    priority: 'P1',
    status: 'pending',
    desc: '是否需要支持用户自定义计算公式？',
    problems: [
      '标准计算方式是否能覆盖所有场景？',
      '自定义公式的安全性如何保证？',
    ],
    solutions: [
      { label: 'A', desc: '不支持，特殊需求由易达定制' },
      { label: 'B', desc: '支持简单四则运算' },
    ],
  },
  {
    id: 'vendor-family',
    title: '厂商族参数标准化',
    priority: 'P1',
    status: 'discussing',
    desc: '不同厂商的族参数命名不统一',
    problems: [
      '参数名称各异',
      '参数单位不一致',
    ],
    solutions: [
      { label: 'A', desc: '要求厂商按标准模板提供' },
      { label: 'B', desc: '系统支持参数映射配置' },
    ],
  },
  {
    id: 'multi-condition',
    title: '多条件匹配优先级',
    priority: 'P2',
    status: 'resolved',
    desc: '多个清单条件都匹配时选哪个？',
    resolution: '按清单配置顺序匹配，第一个成功的生效。UI 提供拖拽排序。',
  },
]
```

---

## 七、交互设计

### 7.1 筛选逻辑

```javascript
const [filter, setFilter] = useState('all')

const filteredIssues = filter === 'all'
  ? issues
  : issues.filter(i => i.status === filter)
```

### 7.2 展开/收起

```javascript
const [expandedIssue, setExpandedIssue] = useState(null)

// 点击切换
onClick={() => setExpandedIssue(expandedIssue === issue.id ? null : issue.id)}
```

### 7.3 动画效果

- 统计卡片: hover-lift
- 问题卡片: hover:border-primary/30
- 展开区域: max-h + overflow-hidden 过渡
- 滚动入场: animate-on-scroll

---

## 八、响应式设计

| 断点 | 统计卡片 | 问题详情 |
|-----|---------|---------|
| 手机 | 2列 | 垂直堆叠 |
| 平板+ | 4列 | 左右两栏 |

---

## 九、空状态

```
┌──────────────────────────────────────────┐
│          ┌────────┐                      │
│          │  📄    │                      │
│          └────────┘                      │
│                                          │
│      暂无 [状态名] 的问题                │
│                                          │
└──────────────────────────────────────────┘
```

---

## 变更记录

| 版本 | 日期 | 修改内容 |
|------|------|----------|
| v1.0 | 2025-11-25 | 初稿 |
| v2.0 | 2025-11-27 | Google风格重设计，添加统计卡片 |
