# 场景案例

本文档整理讨论中涉及的各种族和清单匹配场景，用于验证系统逻辑的完整性。

---

## 案例一：新风机（YBP 简单场景）

### 场景描述

- **族类型**：自建族
- **特点**：多个品目类型，每个对应一个清单
- **参数**：风量（非几何参数）
- **匹配方式**：按风量值区分

### 数据结构

```
品目：新风机
│
├── 构件属性
│   └── 风量（引用族参数，数值型）
│
├── 品目类型
│   ├── 新风机-3000M3/H
│   ├── 新风机-5000M3/H
│   └── 新风机-7000M3/H
│
├── 关联清单
│   ├── 新风机3000M3/H → 匹配条件: 风量 = 3000
│   ├── 新风机5000M3/H → 匹配条件: 风量 = 5000
│   └── 新风机7000M3/H → 匹配条件: 风量 = 7000
│
└── 工程量属性
    └── 计数，单位：台
```

### 建模与输出

| 使用情况 | 匹配清单 | 工程量 |
|---------|---------|-------|
| 3个 3000M3/H | 新风机3000M3/H | 3 台 |
| 2个 5000M3/H | 新风机5000M3/H | 2 台 |
| 1个 7000M3/H | 新风机7000M3/H | 1 台 |

---

## 案例二：排风扇（一对多清单）

### 场景描述

- **族类型**：自建族
- **特点**：一个品目类型，对应多个清单
- **参数**：无特殊参数
- **匹配方式**：无条件，全部匹配

### 数据结构

```
品目：排风扇
│
├── 品目类型
│   └── 排风扇（只有一个）
│
├── 关联清单
│   ├── 小型排风扇安装（不含主材）→ 匹配条件: 无
│   ├── 供应(不含安装)小型排风扇  → 匹配条件: 无
│   └── 小型排风扇电源            → 匹配条件: 无
│
└── 工程量属性
    └── 计数，单位：台/台/个
```

### 建模与输出

| 使用情况 | 匹配清单 | 工程量 |
|---------|---------|-------|
| 5个排风扇 | 小型排风扇安装（不含主材） | 5 台 |
| | 供应(不含安装)小型排风扇 | 5 台 |
| | 小型排风扇电源 | 5 个 |

---

## 案例三：MCD-新风机&排风机（YDC 区间匹配）

### 场景描述

- **族类型**：自建族
- **特点**：参数连续变化，无法穷举品目类型
- **参数**：风量（非几何参数，实例参数）
- **匹配方式**：区间匹配

### 数据结构

```
品目：MCD-新风机&排风机
│
├── 构件属性
│   └── 风量（实例参数，建模时可改）
│
├── 品目类型
│   └── 默认（只需一个）
│
├── 关联清单（第一组：主材）
│   ├── 供应...4000CMH及以上    → 匹配条件: 风量 >= 4000
│   ├── 供应...2000-4000CMH     → 匹配条件: 风量 >= 2000 AND < 4000
│   └── 供应...2000CMH及以下    → 匹配条件: 风量 < 2000
│
├── 关联清单（第二组：安装）
│   ├── 安装...4000CMH及以上    → 匹配条件: 风量 >= 4000
│   ├── 安装...2000-4000CMH     → 匹配条件: 风量 >= 2000 AND < 4000
│   └── 安装...2000CMH及以下    → 匹配条件: 风量 < 2000
│
├── 关联清单（第三组：电源）
│   └── 新风/排风机电源          → 匹配条件: 无（全匹配）
│
└── 工程量属性
    └── 计数，单位：台/台/个
```

### 建模与输出

假设建模中使用了风量为 3500 的新风机：

| 参数值 | 匹配清单 | 工程量 |
|-------|---------|-------|
| 风量=3500 | 供应...2000-4000CMH | 1 台 |
| | 安装...2000-4000CMH | 1 台 |
| | 新风/排风机电源 | 1 个 |

---

## 案例四：防风排风百叶（几何参数 + 面积汇总）

### 场景描述

- **族类型**：自建族
- **特点**：几何参数，工程量按面积汇总
- **参数**：长度、宽度、面积（几何参数）
- **匹配方式**：按面积区间

### 数据结构

```
品目：防风排风百叶
│
├── 构件属性
│   ├── 百叶长度（几何参数，系统只读）
│   ├── 百叶宽度（几何参数，系统只读）
│   └── 百叶窗面积（只读，公式=长×宽）
│
├── 品目类型
│   └── 默认
│
├── 关联清单
│   ├── 防雨排风百叶(截面≤0.25m²)      → 匹配条件: 面积 <= 0.25
│   ├── 防雨排风百叶(0.25<截面≤0.5m²)  → 匹配条件: 面积 > 0.25 AND <= 0.5
│   ├── 防雨新风百叶(0.5<截面≤0.75m²)  → 匹配条件: 面积 > 0.5 AND <= 0.75
│   └── 防雨新风百叶(0.75<截面≤1.0m²)  → 匹配条件: 面积 > 0.75 AND <= 1.0
│
└── 工程量属性
    └── 参数汇总（面积），单位：m²
```

### 建模与输出

| 实例 | 面积 | 匹配清单 |
|-----|------|---------|
| 实例1 | 0.20 m² | 截面≤0.25m² |
| 实例2 | 0.15 m² | 截面≤0.25m² |
| 实例3 | 0.60 m² | 0.5<截面≤0.75m² |

| 清单 | 工程量 |
|-----|-------|
| 防雨排风百叶(截面≤0.25m²) | 0.20 + 0.15 = 0.35 m² |
| 防雨新风百叶(0.5<截面≤0.75m²) | 0.60 m² |

---

## 案例五：系统族-楼板（材质 + 品牌）

### 场景描述

- **族类型**：系统族
- **特点**：按结构材质 + 品牌联合匹配
- **参数**：结构材质（族参数）、品牌（系统新增）
- **匹配方式**：多参数精确匹配

### 数据结构

```
品目：楼板
│
├── 构件属性
│   ├── 结构材质（引用族参数）
│   └── 品牌（系统新增，下拉：琛雄/共荣/冠军）
│
├── 品目类型
│   └── MCD-厨房灰色砖
│
├── 关联清单
│   ├── 150x150mm灰色砖地面（琛雄）
│   │   └── 匹配条件: 结构材质="厨房灰色砖" AND 品牌="琛雄"
│   ├── 150x150mm灰色砖地面（共荣）
│   │   └── 匹配条件: 结构材质="厨房灰色砖" AND 品牌="共荣"
│   └── 150x150mm灰色砖地面（冠军）
│       └── 匹配条件: 结构材质="厨房灰色砖" AND 品牌="冠军"
│
└── 工程量属性
    └── 参数汇总（面积），单位：m²
```

---

## 案例六：叠层墙

### 场景描述

- **族类型**：叠层墙（容器）
- **特点**：由多个基本墙组成，拆分处理
- **处理方式**：清单和工程量基于基本墙

### 数据结构

```
叠层墙：MCD - 乳胶漆+小白砖+同质踢脚线
│
├── 乳胶漆墙（上层）
│   ├── 构件属性：结构材质
│   ├── 清单：室内深色乳胶漆 / 室内浅色乳胶漆
│   └── 工程量：面积
│
├── 小白砖墙（中层）
│   ├── 构件属性：结构材质 + 品牌
│   ├── 清单：墙面小白砖（琛雄/共荣/冠军）
│   └── 工程量：面积
│
└── 同质踢脚线（下层）
    ├── 构件属性：结构材质 + 品牌
    ├── 清单：国产同质砖踢脚（琛雄/共荣/冠军）
    └── 工程量：长度
```

---

## 案例汇总

| 案例 | 族类型 | 匹配方式 | 工程量 | 特殊点 |
|-----|--------|---------|-------|--------|
| 新风机 | 自建族 | 精确值 | 计数 | 多品目类型 |
| 排风扇 | 自建族 | 无条件 | 计数 | 一对多清单 |
| MCD-新风机 | 自建族 | 区间 | 计数 | 实例参数 |
| 百叶 | 自建族 | 区间 | 面积汇总 | 几何参数 |
| 楼板 | 系统族 | 多参数精确 | 面积汇总 | 材质+品牌 |
| 叠层墙 | 叠层墙 | 拆分处理 | 各层独立 | 容器 |

---

## 变更记录

| 版本 | 日期 | 修改内容 |
|------|------|----------|
| v1.0 | - | 初稿 |
